const TelegramBot = require('node-telegram-bot-api');
const express = require('express');

const app = express();

// ะัะพะฒะตััะตะผ ะฝะฐะปะธัะธะต ัะพะบะตะฝะฐ
if (!process.env.BOT_TOKEN) {
  console.error('โ ะะจะะะะ: BOT_TOKEN ะฝะต ัััะฐะฝะพะฒะปะตะฝ!');
  process.exit(1);
}

const token = process.env.BOT_TOKEN;
const bot = new TelegramBot(token, {polling: true});

console.log('โ ะขะพะบะตะฝ ะฟะพะปััะตะฝ, ะทะฐะฟััะบะฐะตะผ ะฑะพัะฐ...');

// ะะพั ัะตะฐะณะธััะตั ะฝะฐ ะบะพะผะฐะฝะดั /start
bot.onText(/\/start/, (msg) => {
  const chatId = msg.chat.id;
  const text = ะัะธะฒะตั! ะฏ ะะฝะธะผะฐะดััะณ ๐จ\nะขะฒะพะน ะฟะพะผะพัะฝะธะบ ะฒ ะผะธัะต ะฐะฝะธะผะฐัะธะธ!\n\nะัะฑะตัะธ ะดะตะนััะฒะธะต:\n/lesson - ะะฐัะฐัั ััะพะบ\n/about - ะะฑะพ ะผะฝะต;
  
  bot.sendMessage(chatId, text);
});

// ะะพั ัะตะฐะณะธััะตั ะฝะฐ ะบะพะผะฐะฝะดั /lesson  
bot.onText(/\/lesson/, (msg) => {
  const chatId = msg.chat.id;
  const lessonText = ๐ฏ ะฃัะพะบ 1: "ะะถะธะฒะปัะตะผ ัะฐัะธะบ"\n\nะัะธะฝัะธะฟ ะกะะะขะะฏ ะธ ะะะกะขะฏะะะะะฏ:\nโข ะจะฐัะธะบ ัะฐัััะณะธะฒะฐะตััั ะฒ ะฟััะถะบะต\nโข ะกะถะธะผะฐะตััั ะฟัะธ ัะดะฐัะต\nโข ะกะพััะฐะฝัะตั ะพะฑัะตะผ\n\nะะฐะดะฐะฝะธะต: ะะฐัะธััะน 3 ะบะฐะดัะฐ ะฟััะณะฐััะตะณะพ ัะฐัะธะบะฐ!;
  
  bot.sendMessage(chatId, lessonText);
});

// ะะพั ัะตะฐะณะธััะตั ะฝะฐ ะบะพะผะฐะฝะดั /about
bot.onText(/\/about/, (msg) => {
  const chatId = msg.chat.id;
  const aboutText = ะฏ - ะะฝะธะผะฐะดััะณ! ๐ค\nะะพะผะพะณะฐั ะฟะพะดัะพััะบะฐะผ ะพัะฒะพะธัั ะฐะฝะธะผะฐัะธั ั ะฝัะปั.\n\nะงัะพ ั ัะผะตั:\nโข ะะฑัััะฝััั ัะปะพะถะฝะพะต ะฟัะพัััะผะธ ัะปะพะฒะฐะผะธ\nโข ะะฐะฒะฐัั ะฟะพัะฐะณะพะฒัะต ะทะฐะดะฐะฝะธั\nโข ะะพะดะดะตัะถะธะฒะฐัั ะธ ะผะพัะธะฒะธัะพะฒะฐัั!\n\nะะตััะธั: 1.0 | ะะฐะทัะฐะฑะพััะธะบ: ะขั! ๐ช;
  
  bot.sendMessage(chatId, aboutText);
});

// ะะฐะฟััะบะฐะตะผ ัะตัะฒะตั
const PORT = process.env.PORT || 3000;
app.listen(PORT, () => {
  console.log('๐ค ะะพั ะะฝะธะผะฐะดััะณ ะฃะกะะะจะะ ะทะฐะฟััะตะฝ!');
  console.log('๐ ะะพัั: ' + PORT);
});
